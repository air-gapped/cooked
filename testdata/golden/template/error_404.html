<!DOCTYPE html>
<html lang="en"
      data-theme="auto"
      data-cooked-version="v0.1.0-test"
      data-upstream-url="https://example.com/missing.md"
      data-content-type="error"
      data-error-type="upstream-error">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Error â€” cooked</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EðŸ³%3C/text%3E%3C/svg%3E">
  <style>

    /* cooked layout */
    * { box-sizing: border-box; }
    body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif; }

    #cooked-header {
      position: sticky; top: 0; z-index: 100;
      display: flex; align-items: center; justify-content: space-between;
      padding: 4px 16px; font-size: 12px;
      border-bottom: 1px solid rgba(128,128,128,0.2);
      background: rgba(246,248,250,0.95); color: #656d76;
    }
    [data-theme="dark"] #cooked-header {
      background: rgba(22,27,34,0.95); color: #8b949e;
    }
    @media (prefers-color-scheme: dark) {
      [data-theme="auto"] #cooked-header {
        background: rgba(22,27,34,0.95); color: #8b949e;
      }
    }

    .cooked-meta { display: flex; align-items: center; gap: 12px; overflow: hidden; flex: 1; }
    .cooked-meta a { color: inherit; text-decoration: none; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .cooked-meta a:hover { text-decoration: underline; }
    .cooked-meta span, .cooked-meta time { white-space: nowrap; }
    .cooked-controls { display: flex; gap: 4px; }
    .cooked-controls button {
      background: none; border: 1px solid rgba(128,128,128,0.3); border-radius: 4px;
      cursor: pointer; padding: 2px 6px; font-size: 14px; color: inherit;
    }
    .cooked-controls button:hover { background: rgba(128,128,128,0.1); }

    main { max-width: 980px; margin: 0 auto; padding: 32px 16px; }
    .markdown-body { font-size: 16px; line-height: 1.5; word-wrap: break-word; }

    #cooked-toc {
      position: fixed; top: 32px; left: 0; bottom: 0; width: 280px;
      overflow-y: auto; padding: 16px; font-size: 13px;
      background: rgba(246,248,250,0.98); border-right: 1px solid rgba(128,128,128,0.2);
      z-index: 50;
    }
    [data-theme="dark"] #cooked-toc {
      background: rgba(22,27,34,0.98); border-color: rgba(128,128,128,0.2);
    }
    @media (prefers-color-scheme: dark) {
      [data-theme="auto"] #cooked-toc {
        background: rgba(22,27,34,0.98);
      }
    }
    #cooked-toc ul { list-style: none; padding: 0; margin: 0; }
    #cooked-toc li { padding: 2px 0; }
    #cooked-toc li[data-level="2"] { padding-left: 12px; }
    #cooked-toc li[data-level="3"] { padding-left: 24px; }
    #cooked-toc li[data-level="4"] { padding-left: 36px; }
    #cooked-toc li[data-level="5"] { padding-left: 48px; }
    #cooked-toc li[data-level="6"] { padding-left: 60px; }
    #cooked-toc a { color: inherit; text-decoration: none; }
    #cooked-toc a:hover { text-decoration: underline; }

    .cooked-code-block { position: relative; margin: 16px 0; }
    .cooked-code-header {
      display: flex; justify-content: flex-end; align-items: center; gap: 8px;
      padding: 4px 8px; font-size: 12px; color: #656d76;
      background: rgba(128,128,128,0.05); border-radius: 6px 6px 0 0;
    }
    .cooked-copy-btn {
      background: none; border: 1px solid rgba(128,128,128,0.3); border-radius: 4px;
      cursor: pointer; padding: 2px 8px; font-size: 11px; color: inherit;
    }
    .cooked-copy-btn:hover { background: rgba(128,128,128,0.1); }

    #cooked-error {
      text-align: center; padding: 80px 16px;
    }
    #cooked-error h1 { font-size: 48px; margin: 0 0 16px; color: #656d76; }
    #cooked-error p { color: #656d76; font-size: 16px; }
    #cooked-error a { color: #0969da; }

    @media print {
      #cooked-header, #cooked-toc { display: none !important; }
      .markdown-body { max-width: 100%; padding: 0; }
    }

    @media (max-width: 768px) {
      #cooked-toc { width: 100%; }
      main { padding: 16px 8px; }
    }

  </style>
</head>
<body>
  <!-- cooked: header -->
  <header id="cooked-header">
    <div class="cooked-meta">
      <a id="cooked-source-link" href="https://example.com/missing.md" title="https://example.com/missing.md">https://example.com/missing.md</a>
    </div>
    <div class="cooked-controls">
      <button id="cooked-theme-toggle" title="Toggle theme">&#x25D1;</button>
    </div>
  </header>
  <!-- cooked: content -->
  <main>
    <div id="cooked-error"
         data-status-code="404"
         data-error-message="Not Found">
      <h1>404 Not Found</h1>
      <p>Not Found</p>
      <p><a href="https://example.com/missing.md">View original file</a></p>
    </div>
  </main>
  <!-- cooked: scripts -->
  <script>
    // Theme toggle: auto â†’ light â†’ dark â†’ auto
    (function() {
      var toggle = document.getElementById('cooked-theme-toggle');
      if (!toggle) return;

      function getTheme() {
        var cookie = document.cookie.match(/_cooked_theme=(\w+)/);
        if (cookie) return cookie[1];
        return document.documentElement.getAttribute('data-theme') || 'auto';
      }

      function setTheme(theme) {
        document.documentElement.setAttribute('data-theme', theme);
        document.cookie = '_cooked_theme=' + theme + ';path=/;max-age=31536000;SameSite=Lax';
      }

      // Check URL param override
      var params = new URLSearchParams(window.location.search);
      var paramTheme = params.get('_cooked_theme');
      if (paramTheme && ['auto','light','dark'].indexOf(paramTheme) !== -1) {
        setTheme(paramTheme);
      } else {
        var saved = getTheme();
        if (saved !== document.documentElement.getAttribute('data-theme')) {
          setTheme(saved);
        }
      }

      var icons = { auto: '\u25D1', light: '\u2600', dark: '\u263E' };
      var labels = { auto: 'Auto', light: 'Light', dark: 'Dark' };

      function updateButton() {
        var theme = document.documentElement.getAttribute('data-theme') || 'auto';
        toggle.textContent = icons[theme] || icons.auto;
        toggle.title = 'Theme: ' + (labels[theme] || 'Auto');
      }
      updateButton();

      toggle.addEventListener('click', function() {
        var current = document.documentElement.getAttribute('data-theme');
        var next = current === 'auto' ? 'light' : current === 'light' ? 'dark' : 'auto';
        setTheme(next);
        updateButton();
      });
    })();

    // TOC toggle
    (function() {
      var toggle = document.getElementById('cooked-toc-toggle');
      var toc = document.getElementById('cooked-toc');
      if (!toggle || !toc) return;

      toggle.addEventListener('click', function() {
        toc.hidden = !toc.hidden;
      });

      // Close TOC on mobile when clicking a link
      toc.addEventListener('click', function(e) {
        if (e.target.tagName === 'A' && window.innerWidth <= 768) {
          toc.hidden = true;
        }
      });
    })();

    // Copy buttons on code blocks
    (function() {
      document.querySelectorAll('.cooked-copy-btn').forEach(function(btn) {
        btn.addEventListener('click', function() {
          var block = btn.closest('.cooked-code-block');
          if (!block) return;
          var code = block.querySelector('pre code, pre');
          if (!code) return;
          navigator.clipboard.writeText(code.textContent).then(function() {
            btn.textContent = 'Copied!';
            btn.setAttribute('data-state', 'copied');
            setTimeout(function() {
              btn.textContent = 'Copy';
              btn.setAttribute('data-state', 'idle');
            }, 2000);
          });
        });
      });
    })();
  </script>
</body>
</html>
